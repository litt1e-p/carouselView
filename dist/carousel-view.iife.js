(()=>{var q=(g,r)=>()=>(r||g((r={exports:{}}).exports,r),r.exports);var F=q(w=>{(function(g,r){"use strict";const V={class:"crsl__pagination"},W=["onClick"];var b=((l,s)=>{for(const[o,u]of s)l[o]=u;return l})(Object.assign({name:"CarouselView"},{props:{direction:{type:String,default:"horizontal",validator:l=>["vertical","horizontal"].indexOf(l)>-1},mousewheelControl:{type:Boolean,default:!0},performanceMode:{type:Boolean,default:!1},paginationVisible:{type:Boolean,default:!0},paginationClickable:{type:Boolean,default:!1},loop:{type:Boolean,default:!0},speed:{type:Number,default:300},autoHeight:{type:Boolean,default:!0},autoWidth:{type:Boolean,default:!0},indicatorColor:{type:String,default:()=>"rgba(153, 153, 153, 0.5)"},indicatorTintColor:{type:String,default:()=>"#007aff"}},emits:["slider-move","slide-change-start","slide-revert-start","slide-change-end","slide-revert-end"],setup:function(l,{emit:s}){const o=l,u=r.ref(null),e=r.reactive({currentPage:1,lastPage:1,translateX:0,translateY:0,startTranslate:0,delta:0,dragging:!1,startPos:null,transitioning:!1,slideEls:[],translateOffset:0,transitionDuration:0,currentHeight:"unset",currentWidth:"unset",startTime:0,observer:void 0});r.onMounted(()=>{e.slideEls=[].map.call(u.value.children,t=>t),o.loop?(r.nextTick(function(){L(),m(e.currentPage,!0)}),x()):m(e.currentPage)}),r.onBeforeUnmount(()=>{H()});const x=()=>{const t=document.querySelector(".crsl__wr");if(!t)return;const n=window.MutationObserver||window.WebKitMutationObserver;e.observer=new n(A),e.observer.observe(t,{subtree:!0,childList:!0,attributes:!0})},H=()=>{e.observer&&(e.observer.disconnect(),e.observer=null),E()},E=()=>{document.removeEventListener("touchmove",f),document.removeEventListener("touchend",p),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",p)},T=()=>{const t=e.currentPage;t<e.slideEls.length||o.loop?m(t+1):P()},C=()=>{const t=e.currentPage;t>1||o.loop?m(t-1):P()},m=(t,n)=>{e.lastPage=e.currentPage,t===0?e.currentPage=e.slideEls.length:t===e.slideEls.length+1?e.currentPage=1:e.currentPage=t,o.loop?(e.delta===0&&h(v(e.lastPage)),setTimeout(function(){h(v(t)),n||S()},0)):(h(v(t)),n||S())},d=r.computed(()=>o.direction==="horizontal"),k=r.computed(()=>o.direction==="vertical"),B=t=>{e.startPos=D(t),e.delta=0,e.startTranslate=v(e.currentPage),e.startTime=new Date().getTime(),e.dragging=!0,e.transitionDuration=0,document.addEventListener("touchmove",f,{passive:!1}),document.addEventListener("touchend",p,{passive:!1}),document.addEventListener("mousemove",f,{passive:!1}),document.addEventListener("mouseup",p,{passive:!1})},f=t=>{e.delta=D(t)-e.startPos,o.performanceMode||(h(e.startTranslate+e.delta),s("slider-move",X())),(k||d&&Math.abs(e.delta)>0)&&t.preventDefault()},p=t=>{e.dragging=!1,e.transitionDuration=o.speed;const n=new Date().getTime()-e.startTime<1e3;e.delta<-100||n&&e.delta<-15?T():e.delta>100||n&&e.delta>15?C():P(),E()},O=t=>{o.mousewheelControl&&(e.transitioning||(t.deltaY>0?T():C()),_()&&t.preventDefault())},P=()=>{m(e.currentPage)},D=t=>{const n=d?"pageX":"pageY";return t.changedTouches?t.changedTouches[0][n]:t[n]},S=()=>{e.transitioning=!0,e.transitionDuration=o.speed,_()?s("slide-change-start",e.currentPage):s("slide-revert-start",e.currentPage)},z=()=>{e.transitioning=!1,e.transitionDuration=0,e.delta=0,_()?s("slide-change-end",e.currentPage):s("slide-revert-end",e.currentPage),o.autoHeight&&d&&Y(),o.autoWidth&&k&&N()},Y=()=>{const t=u.value;if(!t||!t.children)return;e.currentHeight="auto";const n=[...t.children].filter(i=>![...i.classList].includes("crsl__mirror")),a=getComputedStyle(n[e.currentPage-1],null).getPropertyValue("height");e.transitionDuration=o.speed,r.nextTick(()=>{e.currentHeight=a,setTimeout(()=>{e.transitionDuration=0},o.speed)})},N=()=>{const t=u.value;if(!t||!t.children)return;e.currentWidth="auto";const n=[...t.children].filter(i=>![...i.classList].includes("crsl__mirror")),a=getComputedStyle(n[e.currentPage-1],null).getPropertyValue("width");e.transitionDuration=o.speed,r.nextTick(()=>{e.currentWidth=a,setTimeout(()=>{e.transitionDuration=0},o.speed)})},_=()=>e.lastPage!==e.currentPage,h=t=>{e[d?"translateX":"translateY"]=t},X=()=>e[d?"translateX":"translateY"],v=t=>{if(t===0)return 0;const n=d?"clientWidth":"clientHeight";return-[].reduce.call(e.slideEls,function(a,i,c){return c>t-2?a:a+i[n]},0)+e.translateOffset},L=()=>{const t=d?"clientWidth":"clientHeight",n=u.value;if(!n)return;const a=n.firstElementChild.cloneNode(!0),i=n.lastElementChild.cloneNode(!0);a.setAttribute("class","crsl__mirror crsl__mirror-first"),i.setAttribute("class","crsl__mirror crsl__mirror-last"),n.insertBefore(i,n.firstElementChild),n.appendChild(a),e.translateOffset=-i[t]},A=(t,n)=>{const a=u.value;if(!a||t.some(c=>c.target===a))return;const i=a.querySelectorAll(".crsl__mirror");if(i&&i.length){for(let c=0,j=i.length>>>0;c<j;c++)r.nextTick(()=>i[c].remove());r.nextTick(()=>L())}};return(t,n)=>(r.openBlock(),r.createElementBlock("div",{class:r.normalizeClass(["crsl__wrapper",[l.direction,{dragging:r.unref(e).dragging}]]),onTouchstart:B,onMousedown:B,onWheel:O},[r.createElementVNode("div",{class:"crsl__wr",ref:(a,i)=>{i.rf=a,u.value=a},style:r.normalizeStyle({transform:"translate3d("+r.unref(e).translateX+"px,"+r.unref(e).translateY+"px, 0)","transition-duration":r.unref(e).transitionDuration+"ms","max-height":r.unref(e).currentHeight,"max-width":r.unref(e).currentWidth}),onTransitionend:z},[r.renderSlot(t.$slots,"default",{},void 0,!0)],36),r.withDirectives(r.createElementVNode("div",V,[(r.openBlock(!0),r.createElementBlock(r.Fragment,null,r.renderList(r.unref(e).slideEls,(a,i)=>(r.openBlock(),r.createElementBlock("span",{class:r.normalizeClass(["crsl__pagination-bullet",{active:i+1===r.unref(e).currentPage}]),style:r.normalizeStyle({background:i+1===r.unref(e).currentPage?l.indicatorTintColor:l.indicatorColor}),key:i,onClick:c=>l.paginationClickable&&m(i+1)},null,14,W))),128))],512),[[r.vShow,l.paginationVisible]])],34))}}),[["__scopeId","data-v-48884066"]]);const M=[b],y=function(l){M.forEach(s=>{l.component(s.name,s)})};typeof window!="undefined"&&window.Vue&&y(window.Vue),g.CarouselView=b,g.default=y,Object.defineProperty(g,"__esModule",{value:!0}),g[Symbol.toStringTag]="Module"})(w["carousel-view"]=w["carousel-view"]||{},Vue)});F();})();
